# The Council 辩论流程使用指南

> 本文档介绍如何使用 The Council 的 Debate 和 Optimize 工作流程。

---

## 1. 什么是 The Council

The Council（理事会）是一个**对抗性协作**的 AI 治理框架。它由三个专精的 AI Agent 组成：

| 角色                              | 职责                   | 思维风格   |
| :-------------------------------- | :--------------------- | :--------- |
| 🛡️ **Value Defender** (价值辩护人) | 挖掘方案的战略价值     | 发散、前瞻 |
| 🔍 **Risk Auditor** (风险审计师)   | 识别逻辑漏洞和风险     | 严谨、批判 |
| ⚖️ **Chief Justice** (首席裁决官)  | 综合判决并给出行动建议 | 平和、统筹 |

### 设计哲学

1. **对抗性协作**: 通过正反辩论锻造卓越决策
2. **思维异构**: 使用不同模型家族避免同质化盲区
3. **工业级标准**: 所有输出必须具备可执行性

---

## 2. Debate 流程 (单轮辩论)

### 适用场景

- 快速评估一个方案的优劣
- 获取多角度的分析意见
- 生成综合裁决报告

### 流程图

```
📄 输入文档
     ↓
┌────┴────┐
↓         ↓
🛡️正方   🔍反方
↓         ↓
└────┬────┘
     ↓
⚖️ 裁决官
     ↓
📋 裁决报告
```

### 使用步骤

1. **选择群组**: 从侧边栏选择 "The Council"
2. **创建会议**: 点击 "新建会议"，选择 "Council Debate" 模板
3. **输入文档**: 将待审议的文档粘贴到输入框，或上传文件
4. **启动流程**: 点击 "开始"，观察辩论过程
5. **阅读报告**: 流程结束后查看裁决官的综合报告

### 输出格式

裁决报告包含：

- **决策简报**: 评分 (0-100) + 结论
- **评分矩阵**: 战略对齐 (40%) / 实用价值 (30%) / 逻辑一致 (30%)
- **争议交锋清算**: 逐点分析正反方论点
- **强制修补指令**: 具体可执行的改进建议

---

## 3. Optimize 流程 (迭代优化)

### 适用场景

- 需要多轮迭代优化的文档
- 高质量输出（目标分数 ≥ 90）
- 需要人工介入决策的场景

### 流程图

```
📄 输入文档
     ↓
🧠 Memory Retrieval (历史上下文)
     ↓
┌────┴────┐
↓         ↓
🛡️正方   🔍反方
↓         ↓
└────┬────┘
     ↓
⚖️ 裁决官 (输出评分)
     ↓
👤 Human Review
     ├─[继续] → 🔄 回到 Memory Retrieval
     ├─[应用] → ✅ 应用修改
     ├─[回滚] → ↩️ 恢复到上一版本
     └─[退出] → 📋 生成最终报告
```

### Human Review 操作说明

当流程暂停在 Human Review 节点时，你会看到：

| 操作         | 效果                                       |
| :----------- | :----------------------------------------- |
| **继续优化** | 进入下一轮辩论，直到分数达标或达到最大轮数 |
| **应用修改** | 将裁决官的建议应用到文档                   |
| **回滚**     | 恢复到本轮辩论前的文档版本                 |
| **退出**     | 立即结束流程，输出当前状态报告             |

### 自动退出条件

- 综合评分 ≥ 90 分
- 达到最大迭代次数 (默认 5 轮)
- 裁决官建议 `exit_recommendation: true`

---

## 4. 自定义你的 Council

### 修改 Agent Persona

1. 导航到 `/agents` 页面
2. 点击要修改的 Agent
3. 编辑 **System Prompt** 字段
4. 调整 **Temperature** 参数：
   - 正方: 0.8-1.0 (更有创意)
   - 反方: 0.4-0.6 (更严谨)
   - 裁判: 0.1-0.3 (更稳定)

### 添加新成员

你可以添加更多 Agent 到 The Council：

1. 创建新 Agent，如 "技术顾问"
2. 编辑 "The Council" 群组
3. 将新 Agent 添加到默认成员列表
4. 在 Workflow 中添加对应节点

---

## 5. 常见问题

### Q: 辩论太冗长怎么办？

调低 Agent 的 `max_tokens` 参数，或在 Persona 中添加 "控制输出在 500 字以内"。

### Q: 正反方争议点太少？

提高正方的 temperature，或在 Persona 中强调 "必须找出至少 3 个争议点"。

### Q: 裁决不够平衡？

确保裁决官使用 temperature ≤ 0.3，并使用中立的模型（如 GLM）。

---

## 6. 下一步

- 查看 [自定义工作流指南](./custom-workflow.md)
- 了解 [LLM Provider 配置](./llm-providers.md)
- 阅读 [模型选型策略](./model-selection-strategy.md)
